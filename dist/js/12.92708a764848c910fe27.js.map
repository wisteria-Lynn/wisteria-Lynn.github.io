{"version":3,"sources":["webpack:///./src/pages/wechat/chat.vue","webpack:///./src/pages/wechat/chat.vue?5afc","webpack:///src/pages/wechat/chat.vue","webpack:///./src/pages/wechat/chat.vue?5bc3","webpack:///./src/pages/wechat/chat.vue?003c","webpack:///./src/pages/wechat/chat.vue?ed21","webpack:///./src/pages/wechat/chat.vue?8afa"],"names":["__webpack_require__","r","__webpack_exports__","_chat_vue_vue_type_template_id_7311f14d_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_chat_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__","__WEBPACK_IMPORT_KEY__","key","d","_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_4__","component","Object","options","__file","_node_modules_babel_loader_lib_index_js_ref_1_0_node_modules_vue_loader_lib_index_js_vue_loader_options_chat_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__","_node_modules_babel_loader_lib_index_js_ref_1_0_node_modules_vue_loader_lib_index_js_vue_loader_options_chat_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default","n","_user","_api","_bus","name","data","chatLoginName","ws","searchName","chatDetail","chatName","type","readay","chatLineList","chatList","message","localMessage","JSON","parse","sessionStorage","getItem","localIndex","messageList","errorMessage","isShowError","sysMessages","methods","send","window","WebSocket","this","sendName","reciveName","stringify","chatClick","u","_this","MsIndex","findIndex","val","index","arr","username","msNum","$set","list","setItem","setTimeout","div","$refs","bottomScroll","scrollTop","scrollHeight","getReadyLine","item","result","filter","length","getFrendList","_this2","chatFriendList","then","res","code","layer","msg","codeText","getMessNum","getChatAddFriend","_this3","chatAddFriend","wsClose","onclose","loginout","$router","push","mounted","_this4","_bus2","default","$on","levName","messNum","chatArr","mess","created","_this5","r_name","$route","params","websockLink","removeItem","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_3_0_node_modules_css_loader_dist_cjs_js_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_less_loader_dist_cjs_js_node_modules_sass_resources_loader_lib_loader_js_ref_3_3_node_modules_vue_loader_lib_index_js_vue_loader_options_chat_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_3_0_node_modules_css_loader_dist_cjs_js_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_less_loader_dist_cjs_js_node_modules_sass_resources_loader_lib_loader_js_ref_3_3_node_modules_vue_loader_lib_index_js_vue_loader_options_chat_vue_vue_type_style_index_1_id_7311f14d_scoped_true_lang_less___WEBPACK_IMPORTED_MODULE_0__","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","url","_v","_s","on","click","staticStyle","height","line-height","padding-left","size","placeholder","suffix-icon","model","value","callback","$$v","expression","_l","class","$event","float","_e","title","show-icon","closable","ref","padding","nativeOn","keyup","_k","keyCode","_m","staticRenderFns","_withStripped"],"mappings":"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","file":"js/12.92708a764848c910fe27.js","sourcesContent":["import { render, staticRenderFns } from \"./chat.vue?vue&type=template&id=7311f14d&scoped=true&\"\nimport script from \"./chat.vue?vue&type=script&lang=js&\"\nexport * from \"./chat.vue?vue&type=script&lang=js&\"\nimport style0 from \"./chat.vue?vue&type=style&index=0&lang=css&\"\nimport style1 from \"./chat.vue?vue&type=style&index=1&id=7311f14d&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7311f14d\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\Lynn\\\\myproject\\\\wisteria-Lynn.github.io\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('7311f14d', component.options)\n    } else {\n      api.reload('7311f14d', component.options)\n    }\n    module.hot.accept(\"./chat.vue?vue&type=template&id=7311f14d&scoped=true&\", function () {\n      api.rerender('7311f14d', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/pages/wechat/chat.vue\"\nexport default component.exports","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./chat.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./chat.vue?vue&type=script&lang=js&\"","<template>\n\t<div class=\"chat\">\n\t\t<v-head-back-2 url=\"/\"></v-head-back-2>\n\t\t<!--聊天全局-->\n\t\t<div class=\"chat-wrap\">\n\t\t\t<!--聊天居中窗口-->\n\t\t\t<div class=\"chat-frame\">\n\t\t\t\t<!--左侧-->\n\t\t\t\t<div class=\"fram-side\">\n\t\t\t\t\t<!--左侧头部-->\n\t\t\t\t\t<div class=\"fram-side-head\">\n\t\t\t\t\t\t<span>{{chatLoginName}}</span>\n\t\t\t\t\t\t<span @click=\"loginout\" class=\"cursor-point\">退出</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<!--好友列表-->\n\t\t\t\t\t<div style=\"height:40px;line-height: 40px;padding-left:5px;\">\n\t\t\t\t\t\t好友列表({{chatList.length}})\n\t\t\t\t\t</div>\n\t\t\t\t\t<!--搜索框-->\n\t\t\t\t\t<div class=\"fram-side-search\">\n\t\t\t\t\t\t<el-input\n\t\t\t\t\t\t\tsize=\"mini\"\n\t\t\t\t\t\t\tplaceholder=\"请输入内容\"\n\t\t\t\t\t\t\tsuffix-icon=\"el-icon-search\"\n\t\t\t\t\t\t\tv-model=\"searchName\">\n\t\t\t\t\t\t</el-input>\n\t\t\t\t\t</div>\n\t\t\t\t\t<!--好友列表-->\n\t\t\t\t\t<div class=\"fram-side-list\">\n\t\t\t\t\t\t<div class=\"f-s-scroll scroll-style\">\n\t\t\t\t\t\t\t<div v-for=\"(item,index) in chatList\" @click=\"chatClick(item)\" :key=\"index\"\n\t\t\t\t\t\t\t\t :class=\"[item.username === chatDetail.chatName?'active':'']\" class=\"f-l-item\">\n\t\t\t\t\t\t\t<!--<div v-for=\"item in chatList\" @click=\"chatClick(item)\" class=\"f-l-item\">-->\n\t\t\t\t\t\t\t\t<span class=\"f-l-name\">{{item.username}}</span>\n\t\t\t\t\t\t\t\t<div v-if=\"item.type === 2\" style=\"float:right;\">\n\t\t\t\t\t\t\t\t\t<span class=\"message-num chat-ms-num\" v-if=\"getMessNum(item) > 0\">{{getMessNum(item)}}</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<span class=\"f-l-isready\">{{getReadyLine(item,index) ? '在线':'离线'}}</span>\n\t\t\t\t\t\t\t\t<div v-if=\"item.type === 0\" style=\"float:right;\">\n\t\t\t\t\t\t\t\t\t<span class=\"btn btn-error chat-btn-reject\">待通过</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div v-if=\"item.type === 1\" style=\"float:right;\">\n\t\t\t\t\t\t\t\t\t<span class=\"btn btn-success chat-btn-agree\" @click=\"getChatAddFriend(item,'recive')\">接受</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<!--中间内容-->\n\t\t\t\t<div class=\"fram-container\">\n\t\t\t\t\t<!--错误提示-->\n\t\t\t\t\t<div class=\"errorMssage\" v-if=\"isShowError\">\n\t\t\t\t\t\t<!--<div>{{errorMessage}}</div>-->\n\t\t\t\t\t\t<div><el-alert\n\t\t\t\t\t\t\t:title=\"errorMessage\"\n\t\t\t\t\t\t\ttype=\"warning\"\n\t\t\t\t\t\t\tshow-icon\n\t\t\t\t\t\t\t:closable=\"false\">\n\t\t\t\t\t\t</el-alert></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<!--内容头部-->\n\t\t\t\t\t<div class=\"fram-head\">\n\t\t\t\t\t\t<div>{{chatDetail.chatName}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<!--聊天内容-->\n\t\t\t\t\t<div class=\"fram-content\">\n\t\t\t\t\t\t<div class=\"m-p-scroll scroll-style\" ref=\"bottomScroll\">\n\t\t\t\t\t\t\t<div class=\"message-panel\">\n\t\t\t\t\t\t\t\t<div v-for=\"list in messageList\" v-if=\"list.chatName === chatDetail.chatName\">\n\t\t\t\t\t\t\t\t\t<div class=\"m-p-wrap\" v-for=\"item in list.chatArr\">\n\t\t\t\t\t\t\t\t\t\t<div v-if=\"item.name === chatLoginName\" class=\"t-right\">\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"m-p-name-1\">{{item.name}}</div>\n\t\t\t\t\t\t\t\t\t\t\t<span class=\"m-p-text-1 right\">{{item.mess}}</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div v-else class=\"t-left\">\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"m-p-name-2\">{{item.name}}</div>\n\t\t\t\t\t\t\t\t\t\t\t<span class=\"m-p-text-2\">{{item.mess}}</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<!--聊天输入框-->\n\t\t\t\t\t<div class=\"fram-input\">\n\t\t\t\t\t\t<div style=\"padding:0 2px;\">\n\t\t\t\t\t\t\t<el-input\n\t\t\t\t\t\t\t\t@keyup.enter.native=\"send\"\n\t\t\t\t\t\t\t\ttype=\"textarea\"\n\t\t\t\t\t\t\t\tplaceholder=\"请输入内容\"\n\t\t\t\t\t\t\t\tv-model=\"message\">\n\t\t\t\t\t\t\t</el-input>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<!--聊天发送-->\n\t\t\t\t\t<div class=\"fram-foot t-right\">\n\t\t\t\t\t\t<div style=\"padding:0 1px;\">\n\t\t\t\t\t\t\t<el-button @click=\"send\">发送</el-button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<!--右侧-->\n\t\t\t\t<div class=\"fram-rgiht\">\n\t\t\t\t\t<!--右侧头部-->\n\t\t\t\t\t<div class=\"fram-head\">\n\t\t\t\t\t\t<div>系统消息</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<!--右侧系统消息-->\n\t\t\t\t\t<div class=\"fram-right-content\">\n\t\t\t\t\t\t<div class=\"f-r-scroll scroll-style\">\n\t\t\t\t\t\t\t<div v-for=\"list in sysMessages\">{{list}}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\n\timport { chatFriendList,chatAddFriend } from '../../api/user'\n\timport { codeText } from '../../api/api'\n\timport Bus from '../../common/bus'\n\texport default {\n\t\tname: \"chat\",\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tchatLoginName: '',// 聊天室登录账号\n\t\t\t\tws: '', // 服务器对象\n\t\t\t\tsearchName: '', // 搜索关键字\n\t\t\t\tchatDetail:{ // 聊天对象信息\n\t\t\t\t\tchatName: '',// 对象名字\n\t\t\t\t\ttype:'', // 和该对象的关系，0已发送加好友信息，1等待好友验证，2已是好友关系\n\t\t\t\t\treaday:''// 是否在线\n\t\t\t\t}, // 对方详情\n\t\t\t\tchatLineList: [],// 聊天在线用户\n\t\t\t\tchatList: [],// 好友列表\n\t\t\t\tmessage: '', // 发送的消息\n\t\t\t\tlocalMessage:JSON.parse(sessionStorage.getItem('messageList')) || [],// 本地聊天记录\n\t\t\t\tlocalIndex:'',// 该登录用户在本地消息记录中的索引\n\t\t\t\tmessageList: [],// 消息列表\n\t\t\t\terrorMessage: '',// 错误信息\n\t\t\t\tisShowError: false,// 错误信息展示tip\n\t\t\t\tsysMessages: [],//系统消息\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\t// 发送\n\t\t\tsend() {\n\t\t\t\tif (!window.WebSocket) {\n\t\t\t\t\tthis.errorMessage = '服务器关闭，请退出重新登录'\n\t\t\t\t\tthis.isShowError = true\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tif (this.chatDetail.chatName === '') {\n\t\t\t\t\tthis.errorMessage = '请选择聊天对象'\n\t\t\t\t\tthis.isShowError = true\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tif ( this.message === '') {\n\t\t\t\t\tthis.errorMessage = '消息不能为空'\n\t\t\t\t\tthis.isShowError = true\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tif (this.chatDetail.type !== 2) {\n\t\t\t\t\tthis.errorMessage = '你们还不是好友，不能聊天哦'\n\t\t\t\t\tthis.isShowError = true\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tif (!this.chatDetail.readay) {\n\t\t\t\t\tthis.errorMessage = '该好友不在线，不能聊天哦'\n\t\t\t\t\tthis.isShowError = true\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tlet message = {\n\t\t\t\t\ttype: 'message', // 消息类型\n\t\t\t\t\tsendName: this.chatLoginName,// 发送方昵称\n\t\t\t\t\treciveName: this.chatDetail.chatName,// 接收方昵称\n\t\t\t\t\tmessage: this.message // 消息\n\t\t\t\t}\n\t\t\t\tthis.ws.send(JSON.stringify(message))\n\t\t\t\tthis.message = ''\n\t\t\t},\n\t\t\t// 左侧item点击事件\n\t\t\tchatClick(u) {\n\t\t\t\t// 消息索引\n\t\t\t\tlet MsIndex = this.messageList.findIndex((val, index, arr) => {\n\t\t\t\t\treturn val.chatName === u.username\n\t\t\t\t})\n\t\t\t\tif (MsIndex > -1) {\n\t\t\t\t\t// 是否有未读消息\n\t\t\t\t\tif (this.messageList[MsIndex].msNum > 0) {\n\t\t\t\t\t\tthis.$set(this.messageList[MsIndex],'msNum',0)\n\t\t\t\t\t\t// 已读过后，更新本地消息\n\t\t\t\t\t\tlet localIndex = this.localMessage.findIndex((val, index, arr) => {\n\t\t\t\t\t\t\treturn val.name === this.chatLoginName\n\t\t\t\t\t\t})\n\t\t\t\t\t\tthis.localMessage[localIndex].list = this.messageList\n\t\t\t\t\t\tsessionStorage.setItem('messageList', JSON.stringify(this.localMessage))\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// 滚动条居底部\n\t\t\t\tsetTimeout(()=> {\n\t\t\t\t\tlet div = this.$refs.bottomScroll\n\t\t\t\t\tdiv.scrollTop = div.scrollHeight\n\t\t\t\t},100)\n\t\t\t\t// 聊天对象信息\n\t\t\t\tthis.chatDetail = {\n\t\t\t\t\tchatName:u.username,\n\t\t\t\t\ttype:u.type,\n\t\t\t\t\treaday:u.readay\n\t\t\t\t}\n\t\t\t\tthis.errorMessage = ''\n\t\t\t\tthis.isShowError = false\n\t\t\t},\n\t\t\t// 判断用户是否在线\n\t\t\tgetReadyLine(item,index){\n\t\t\t\tlet result = this.chatLineList.filter((val, index, arr) => {\n\t\t\t\t\treturn val.username === item.username\n\t\t\t\t})\n\t\t\t\tlet readay = result.length === 0 ? false : result[0].readay\n\t\t\t\tthis.chatList[index].readay = readay\n\t\t\t\treturn readay\n\t\t\t},\n\t\t\t// 获取好友列表\n\t\t\tgetFrendList(){\n\t\t\t\tchatFriendList({\n\t\t\t\t\tname:this.chatLoginName\n\t\t\t\t}).then((res) => {\n\t\t\t\t\tif(res.code !== 0) {\n\t\t\t\t\t\tthis.layer.msg(codeText(res.code))\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.chatList = res.data\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\t// 判断未读消息\n\t\t\tgetMessNum(item) {\n\t\t\t\tlet result = this.messageList.filter((val, index, arr) => {\n\t\t\t\t\treturn val.chatName === item.username\n\t\t\t\t})\n\t\t\t\treturn result.length === 0 ? 0 : result[0].msNum\n\t\t\t},\n\t\t\t// 添加/接受 好友\n\t\t\tgetChatAddFriend(item,type) {\n\t\t\t\tchatAddFriend({\n\t\t\t\t\tsendName:type === 'add' ? this.chatLoginName : item.username,\n\t\t\t\t\treciveName:type === 'recive' ? this.chatLoginName : item.username,\n\t\t\t\t\ttype:type\n\t\t\t\t}).then((res) => {\n\t\t\t\t\tif(res.code !== 0) {\n\t\t\t\t\t\tthis.layer.msg(codeText(res.code))\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.getFrendList()\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\t// getChatReciveFriend() {\n\t\t\t// \tchatReciveFriend({}).then((res) => {\n\t\t\t// \t\tif(res.code !== 0) {\n\t\t\t// \t\t\tthis.layer.msg(codeText(res.code))\n\t\t\t// \t\t} else {\n\t\t\t//\n\t\t\t// \t\t}\n\t\t\t// \t})\n\t\t\t// },\n\t\t\t// 关闭服务器连接\n\t\t\twsClose(){\n\t\t\t\tthis.ws.send(JSON.stringify({\n\t\t\t\t\ttype: 'close',\n\t\t\t\t\tusername: this.chatLoginName\n\t\t\t\t}))\n\t\t\t\tthis.ws.onclose()\n\t\t\t},\n\t\t\t// 退出\n\t\t\tloginout() {\n\t\t\t\tthis.wsClose()\n\t\t\t\tthis.$router.push({name:'chatLogin'})\n\t\t\t}\n\t\t},\n\t\tmounted(){\n\t\t\t// 获取ws传值\n\t\t\tBus.$on('system', (data) => {\n\t\t\t\tthis.sysMessages.push(data.message)\n\t\t\t})\n\t\t\tBus.$on('userList', (data) => {\n\t\t\t\tthis.chatLineList = data.message\n\t\t\t})\n\t\t\tBus.$on('message', (data) => {\n\t\t\t\t// 对方昵称\n\t\t\t\tlet levName = this.chatLoginName === data.sendName ? data.reciveName : data.sendName\n\t\t\t\t// 消息条数\n\t\t\t\tlet messNum = 0\n\t\t\t\t// 聊天时是否显示当前 发送/接收 消息的面板\n\t\t\t\tif(levName !== this.chatDetail.chatName) {\n\t\t\t\t\t// 消息条数加1\n\t\t\t\t\tmessNum++\n\t\t\t\t} else {\n\t\t\t\t\t// 聊天消息置底\n\t\t\t\t\tsetTimeout(()=> {\n\t\t\t\t\t\tlet div = this.$refs.bottomScroll\n\t\t\t\t\t\tdiv.scrollTop = div.scrollHeight\n\t\t\t\t\t},100)\n\t\t\t\t}\n\t\t\t\t// 该账户有聊天记录\n\t\t\t\tif (this.localIndex > -1) {\n\t\t\t\t\tthis.messageList = this.localMessage[this.localIndex].list\n\t\t\t\t\t// 拿取聊天对象的消息索引\n\t\t\t\t\tlet index = this.messageList.findIndex((val, index, arr) => {\n\t\t\t\t\t\treturn val.chatName === levName\n\t\t\t\t\t})\n\t\t\t\t\t// 判断该对象是否有聊天消息\n\t\t\t\t\tif (index > -1) {\n\t\t\t\t\t\t// 该对象有聊天消息，将新消息压入\n\t\t\t\t\t\tthis.messageList[index].chatArr.push({\n\t\t\t\t\t\t\tname: data.sendName,\n\t\t\t\t\t\t\tmess: data.message\n\t\t\t\t\t\t})\n\t\t\t\t\t\t// 新消息提示\n\t\t\t\t\t\tif(messNum > 0){\n\t\t\t\t\t\t\tthis.$set(this.messageList[index],'msNum',this.messageList[index].msNum + messNum)\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// 该对象没有聊天消息，新增\n\t\t\t\t\t\tthis.messageList.push({\n\t\t\t\t\t\t\tchatName: levName,\n\t\t\t\t\t\t\tchatArr: [{\n\t\t\t\t\t\t\t\tname: data.sendName,\n\t\t\t\t\t\t\t\tmess: data.message\n\t\t\t\t\t\t\t}],\n\t\t\t\t\t\t\tmsNum:messNum\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\t// 更新本地消息\n\t\t\t\t\tthis.localMessage[this.localIndex].list = this.messageList\n\t\t\t\t} else {\n\t\t\t\t\t// 该账户没有聊天记录 新增关于该账户的消息\n\t\t\t\t\tthis.messageList.push({\n\t\t\t\t\t\tchatName: levName,\n\t\t\t\t\t\tchatArr: [{\n\t\t\t\t\t\t\tname: data.sendName,\n\t\t\t\t\t\t\tmess: data.message\n\t\t\t\t\t\t}],\n\t\t\t\t\t\tmsNum:messNum\n\t\t\t\t\t})\n\t\t\t\t\tthis.localMessage.push({\n\t\t\t\t\t\tname:this.chatLoginName,\n\t\t\t\t\t\tlist:this.messageList,\n\t\t\t\t\t})\n\t\t\t\t\tthis.localIndex = this.localMessage.length - 1\n\t\t\t\t}\n\t\t\t\t// 更新存储信息\n\t\t\t\tsessionStorage.setItem('messageList', JSON.stringify(this.localMessage))\n\t\t\t})\n\t\t},\n\t\tcreated() {\n\t\t\tlet r_name = this.$route.params.name || sessionStorage.getItem('chatLoginName')\n\t\t\tlet websockLink = sessionStorage.getItem('websocketLink')\n\t\t\tif (r_name && websockLink === '1'){\n\t\t\t\t\t// 保存登录名\n\t\t\t\t\tsessionStorage.setItem('chatLoginName',r_name)\n\t\t\t\t\tthis.chatLoginName = r_name\n\t\t\t\t// 获取好友列表\n\t\t\t\tthis.getFrendList()\n\t\t\t\t// 当前账户的消息索引\n\t\t\t\tthis.localIndex = this.localMessage.findIndex((val, index, arr) => {\n\t\t\t\t\treturn val.name === this.chatLoginName\n\t\t\t\t})\n\t\t\t\t// 拿取该账户的本地消息\n\t\t\t\tthis.messageList =this.localIndex > -1 ? this.localMessage[this.localIndex].list : []\n\t\t\t\t\t// 链接服务器\n\t\t\t\t\t// let ws = new WebSocket('ws://127.0.0.1:3001')\n\t\t\t\t\t// this.ws = ws\n\t\t\t\t\t// ws.onopen = (e) => {\n\t\t\t\t\t// \tconsole.log(\"连接服务器成功\")\n\t\t\t\t\t// \t// 发送登录消息\n\t\t\t\t\t// \tlet message = {\n\t\t\t\t\t// \t\ttype: 'login',\n\t\t\t\t\t// \t\tusername: this.chatLoginName\n\t\t\t\t\t// \t}\n\t\t\t\t\t// \tthis.ws.send(JSON.stringify(message))\n\t\t\t\t\t// }\n\t\t\t\t\t// ws.onmessage = (e) => {\n\t\t\t\t\t// \tconsole.log(e.data)\n\t\t\t\t\t// \tlet data = JSON.parse(e.data)\n\t\t\t\t\t// \t// 系统消息\n\t\t\t\t\t// \tif (data.type === 'system') {\n\t\t\t\t\t// \t\tthis.sysMessages.push(data.message)\n\t\t\t\t\t// \t}\n\t\t\t\t\t// \t// 用户在线列表\n\t\t\t\t\t// \tif (data.type === 'userList') {\n\t\t\t\t\t// \t\tthis.chatLineList = data.message\n\t\t\t\t\t// \t}\n\t\t\t\t\t// \t// 对话消息\n\t\t\t\t\t// \tif (data.type === 'message') {\n\t\t\t\t\t// \t\t// 对方昵称\n\t\t\t\t\t// \t\tlet levName = this.chatLoginName === data.sendName ? data.reciveName : data.sendName\n\t\t\t\t\t// \t\t// 消息条数\n\t\t\t\t\t// \t\tlet messNum = 0\n\t\t\t\t\t// \t\t// 聊天时是否显示当前 发送/接收 消息的面板\n\t\t\t\t\t// \t\tif(levName !== this.chatDetail.chatName) {\n\t\t\t\t\t// \t\t\t// 消息条数加1\n\t\t\t\t\t// \t\t\tmessNum++\n\t\t\t\t\t// \t\t} else {\n\t\t\t\t\t// \t\t\t// 聊天消息置底\n\t\t\t\t\t// \t\t\tsetTimeout(()=> {\n\t\t\t\t\t// \t\t\t\tlet div = this.$refs.bottomScroll\n\t\t\t\t\t// \t\t\t\tdiv.scrollTop = div.scrollHeight\n\t\t\t\t\t// \t\t\t},100)\n\t\t\t\t\t// \t\t}\n\t\t\t\t\t// \t\t// 该账户有聊天记录\n\t\t\t\t\t// \t\tif (this.localIndex > -1) {\n\t\t\t\t\t// \t\t\tthis.messageList = this.localMessage[this.localIndex].list\n\t\t\t\t\t// \t\t\t// 拿取聊天对象的消息索引\n\t\t\t\t\t// \t\t\tlet index = this.messageList.findIndex((val, index, arr) => {\n\t\t\t\t\t// \t\t\t\treturn val.chatName === levName\n\t\t\t\t\t// \t\t\t})\n\t\t\t\t\t// \t\t\t// 判断该对象是否有聊天消息\n\t\t\t\t\t// \t\t\tif (index > -1) {\n\t\t\t\t\t// \t\t\t\t// 该对象有聊天消息，将新消息压入\n\t\t\t\t\t// \t\t\t\tthis.messageList[index].chatArr.push({\n\t\t\t\t\t// \t\t\t\t\tname: data.sendName,\n\t\t\t\t\t// \t\t\t\t\tmess: data.message\n\t\t\t\t\t// \t\t\t\t})\n\t\t\t\t\t// \t\t\t\t// 新消息提示\n\t\t\t\t\t// \t\t\t\tif(messNum > 0){\n\t\t\t\t\t// \t\t\t\t\tthis.$set(this.messageList[index],'msNum',this.messageList[index].msNum + messNum)\n\t\t\t\t\t// \t\t\t\t}\n\t\t\t\t\t// \t\t\t} else {\n\t\t\t\t\t// \t\t\t\t// 该对象没有聊天消息，新增\n\t\t\t\t\t// \t\t\t\tthis.messageList.push({\n\t\t\t\t\t// \t\t\t\t\tchatName: levName,\n\t\t\t\t\t// \t\t\t\t\tchatArr: [{\n\t\t\t\t\t// \t\t\t\t\t\tname: data.sendName,\n\t\t\t\t\t// \t\t\t\t\t\tmess: data.message\n\t\t\t\t\t// \t\t\t\t\t}],\n\t\t\t\t\t// \t\t\t\t\tmsNum:messNum\n\t\t\t\t\t// \t\t\t\t})\n\t\t\t\t\t// \t\t\t}\n\t\t\t\t\t// \t\t\t// 更新本地消息\n\t\t\t\t\t// \t\t\tthis.localMessage[this.localIndex].list = this.messageList\n\t\t\t\t\t// \t\t} else {\n\t\t\t\t\t// \t\t\t// 该账户没有聊天记录 新增关于该账户的消息\n\t\t\t\t\t// \t\t\tthis.messageList.push({\n\t\t\t\t\t// \t\t\t\tchatName: levName,\n\t\t\t\t\t// \t\t\t\tchatArr: [{\n\t\t\t\t\t// \t\t\t\t\tname: data.sendName,\n\t\t\t\t\t// \t\t\t\t\tmess: data.message\n\t\t\t\t\t// \t\t\t\t}],\n\t\t\t\t\t// \t\t\t\tmsNum:messNum\n\t\t\t\t\t// \t\t\t})\n\t\t\t\t\t// \t\t\tthis.localMessage.push({\n\t\t\t\t\t// \t\t\t\tname:this.chatLoginName,\n\t\t\t\t\t// \t\t\t\tlist:this.messageList,\n\t\t\t\t\t// \t\t\t})\n\t\t\t\t\t// \t\t\tthis.localIndex = this.localMessage.length - 1\n\t\t\t\t\t// \t\t}\n\t\t\t\t\t// \t\t// 更新存储信息\n\t\t\t\t\t// \t\tsessionStorage.setItem('messageList', JSON.stringify(this.localMessage))\n\t\t\t\t\t// \t}\n\t\t\t\t\t// }\n\t\t\t\t\t// ws.onclose = (e) => {\n\t\t\t\t\t// \tconsole.log(\"服务器关闭\")\n\t\t\t\t\t// }\n\t\t\t\t\t// ws.onerror = e => {\n\t\t\t\t\t// \tconsole.log(\"连接出错\")\n\t\t\t\t\t// }\n\t\t\t\t\t// // 前端代码监听页面关闭或者刷新\n\t\t\t\t\t// window.onunload = () => {\n\t\t\t\t\t// \tthis.wsClose()\n\t\t\t\t\t// }\n\t\t\t\t\t// //监听窗口关闭事件，当窗口关闭时，主动去关闭websocket连接，防止连接还没断开就关闭窗口，server端会抛异常。\n\t\t\t\t\t// window.onbeforeunload = function () {\n\t\t\t\t\t// \tthis.wsClose()\n\t\t\t\t\t// }\n\t\t\t} else {\n\t\t\t\tsessionStorage.removeItem('chatLoginName')\n\t\t\t\tthis.$router.push({name:'chatLogin'})\n\t\t\t}\n\t\t}\n\t}\n</script>\n<style>\n\t.fram-input textarea {\n\t\theight: 120px;\n\t\tborder: none;\n\t}\n</style>\n<style scoped lang=\"less\">\n\t.chat-btn-agree,.chat-btn-reject{\n\t\tpadding:0 10px;\n\t\tfont-size:12px;\n\t\tline-height: 20px;\n\t}\n\t.chat-ms-num{\n\t\twidth:20px;\n\t\theight:20px;\n\t\tline-height: 20px;\n\t\tfont-size:12px;\n\t\ttext-align: center;\n\t}\n</style>\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--3-0!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/less-loader/dist/cjs.js!../../../node_modules/sass-resources-loader/lib/loader.js??ref--3-3!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./chat.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--3-0!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/less-loader/dist/cjs.js!../../../node_modules/sass-resources-loader/lib/loader.js??ref--3-3!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./chat.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--3-0!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/less-loader/dist/cjs.js!../../../node_modules/sass-resources-loader/lib/loader.js??ref--3-3!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./chat.vue?vue&type=style&index=1&id=7311f14d&scoped=true&lang=less&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--3-0!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/less-loader/dist/cjs.js!../../../node_modules/sass-resources-loader/lib/loader.js??ref--3-3!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./chat.vue?vue&type=style&index=1&id=7311f14d&scoped=true&lang=less&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { staticClass: \"chat\" },\n    [\n      _c(\"v-head-back-2\", { attrs: { url: \"/\" } }),\n      _vm._v(\" \"),\n      _c(\"div\", { staticClass: \"chat-wrap\" }, [\n        _c(\"div\", { staticClass: \"chat-frame\" }, [\n          _c(\"div\", { staticClass: \"fram-side\" }, [\n            _c(\"div\", { staticClass: \"fram-side-head\" }, [\n              _c(\"span\", [_vm._v(_vm._s(_vm.chatLoginName))]),\n              _vm._v(\" \"),\n              _c(\n                \"span\",\n                { staticClass: \"cursor-point\", on: { click: _vm.loginout } },\n                [_vm._v(\"退出\")]\n              )\n            ]),\n            _vm._v(\" \"),\n            _c(\n              \"div\",\n              {\n                staticStyle: {\n                  height: \"40px\",\n                  \"line-height\": \"40px\",\n                  \"padding-left\": \"5px\"\n                }\n              },\n              [\n                _vm._v(\n                  \"\\n\\t\\t\\t\\t\\t好友列表(\" +\n                    _vm._s(_vm.chatList.length) +\n                    \")\\n\\t\\t\\t\\t\"\n                )\n              ]\n            ),\n            _vm._v(\" \"),\n            _c(\n              \"div\",\n              { staticClass: \"fram-side-search\" },\n              [\n                _c(\"el-input\", {\n                  attrs: {\n                    size: \"mini\",\n                    placeholder: \"请输入内容\",\n                    \"suffix-icon\": \"el-icon-search\"\n                  },\n                  model: {\n                    value: _vm.searchName,\n                    callback: function($$v) {\n                      _vm.searchName = $$v\n                    },\n                    expression: \"searchName\"\n                  }\n                })\n              ],\n              1\n            ),\n            _vm._v(\" \"),\n            _c(\"div\", { staticClass: \"fram-side-list\" }, [\n              _c(\n                \"div\",\n                { staticClass: \"f-s-scroll scroll-style\" },\n                _vm._l(_vm.chatList, function(item, index) {\n                  return _c(\n                    \"div\",\n                    {\n                      key: index,\n                      staticClass: \"f-l-item\",\n                      class: [\n                        item.username === _vm.chatDetail.chatName\n                          ? \"active\"\n                          : \"\"\n                      ],\n                      on: {\n                        click: function($event) {\n                          _vm.chatClick(item)\n                        }\n                      }\n                    },\n                    [\n                      _c(\"span\", { staticClass: \"f-l-name\" }, [\n                        _vm._v(_vm._s(item.username))\n                      ]),\n                      _vm._v(\" \"),\n                      item.type === 2\n                        ? _c(\"div\", { staticStyle: { float: \"right\" } }, [\n                            _vm.getMessNum(item) > 0\n                              ? _c(\n                                  \"span\",\n                                  { staticClass: \"message-num chat-ms-num\" },\n                                  [_vm._v(_vm._s(_vm.getMessNum(item)))]\n                                )\n                              : _vm._e()\n                          ])\n                        : _vm._e(),\n                      _vm._v(\" \"),\n                      _c(\"span\", { staticClass: \"f-l-isready\" }, [\n                        _vm._v(\n                          _vm._s(\n                            _vm.getReadyLine(item, index) ? \"在线\" : \"离线\"\n                          )\n                        )\n                      ]),\n                      _vm._v(\" \"),\n                      item.type === 0\n                        ? _c(\"div\", { staticStyle: { float: \"right\" } }, [\n                            _c(\n                              \"span\",\n                              { staticClass: \"btn btn-error chat-btn-reject\" },\n                              [_vm._v(\"待通过\")]\n                            )\n                          ])\n                        : _vm._e(),\n                      _vm._v(\" \"),\n                      item.type === 1\n                        ? _c(\"div\", { staticStyle: { float: \"right\" } }, [\n                            _c(\n                              \"span\",\n                              {\n                                staticClass: \"btn btn-success chat-btn-agree\",\n                                on: {\n                                  click: function($event) {\n                                    _vm.getChatAddFriend(item, \"recive\")\n                                  }\n                                }\n                              },\n                              [_vm._v(\"接受\")]\n                            )\n                          ])\n                        : _vm._e()\n                    ]\n                  )\n                }),\n                0\n              )\n            ])\n          ]),\n          _vm._v(\" \"),\n          _c(\"div\", { staticClass: \"fram-container\" }, [\n            _vm.isShowError\n              ? _c(\"div\", { staticClass: \"errorMssage\" }, [\n                  _c(\n                    \"div\",\n                    [\n                      _c(\"el-alert\", {\n                        attrs: {\n                          title: _vm.errorMessage,\n                          type: \"warning\",\n                          \"show-icon\": \"\",\n                          closable: false\n                        }\n                      })\n                    ],\n                    1\n                  )\n                ])\n              : _vm._e(),\n            _vm._v(\" \"),\n            _c(\"div\", { staticClass: \"fram-head\" }, [\n              _c(\"div\", [_vm._v(_vm._s(_vm.chatDetail.chatName))])\n            ]),\n            _vm._v(\" \"),\n            _c(\"div\", { staticClass: \"fram-content\" }, [\n              _c(\n                \"div\",\n                { ref: \"bottomScroll\", staticClass: \"m-p-scroll scroll-style\" },\n                [\n                  _c(\n                    \"div\",\n                    { staticClass: \"message-panel\" },\n                    _vm._l(_vm.messageList, function(list) {\n                      return list.chatName === _vm.chatDetail.chatName\n                        ? _c(\n                            \"div\",\n                            _vm._l(list.chatArr, function(item) {\n                              return _c(\"div\", { staticClass: \"m-p-wrap\" }, [\n                                item.name === _vm.chatLoginName\n                                  ? _c(\"div\", { staticClass: \"t-right\" }, [\n                                      _c(\"div\", { staticClass: \"m-p-name-1\" }, [\n                                        _vm._v(_vm._s(item.name))\n                                      ]),\n                                      _vm._v(\" \"),\n                                      _c(\n                                        \"span\",\n                                        { staticClass: \"m-p-text-1 right\" },\n                                        [_vm._v(_vm._s(item.mess))]\n                                      )\n                                    ])\n                                  : _c(\"div\", { staticClass: \"t-left\" }, [\n                                      _c(\"div\", { staticClass: \"m-p-name-2\" }, [\n                                        _vm._v(_vm._s(item.name))\n                                      ]),\n                                      _vm._v(\" \"),\n                                      _c(\n                                        \"span\",\n                                        { staticClass: \"m-p-text-2\" },\n                                        [_vm._v(_vm._s(item.mess))]\n                                      )\n                                    ])\n                              ])\n                            }),\n                            0\n                          )\n                        : _vm._e()\n                    }),\n                    0\n                  )\n                ]\n              )\n            ]),\n            _vm._v(\" \"),\n            _c(\"div\", { staticClass: \"fram-input\" }, [\n              _c(\n                \"div\",\n                { staticStyle: { padding: \"0 2px\" } },\n                [\n                  _c(\"el-input\", {\n                    attrs: { type: \"textarea\", placeholder: \"请输入内容\" },\n                    nativeOn: {\n                      keyup: function($event) {\n                        if (\n                          !(\"button\" in $event) &&\n                          _vm._k(\n                            $event.keyCode,\n                            \"enter\",\n                            13,\n                            $event.key,\n                            \"Enter\"\n                          )\n                        ) {\n                          return null\n                        }\n                        return _vm.send($event)\n                      }\n                    },\n                    model: {\n                      value: _vm.message,\n                      callback: function($$v) {\n                        _vm.message = $$v\n                      },\n                      expression: \"message\"\n                    }\n                  })\n                ],\n                1\n              )\n            ]),\n            _vm._v(\" \"),\n            _c(\"div\", { staticClass: \"fram-foot t-right\" }, [\n              _c(\n                \"div\",\n                { staticStyle: { padding: \"0 1px\" } },\n                [\n                  _c(\"el-button\", { on: { click: _vm.send } }, [_vm._v(\"发送\")])\n                ],\n                1\n              )\n            ])\n          ]),\n          _vm._v(\" \"),\n          _c(\"div\", { staticClass: \"fram-rgiht\" }, [\n            _vm._m(0),\n            _vm._v(\" \"),\n            _c(\"div\", { staticClass: \"fram-right-content\" }, [\n              _c(\n                \"div\",\n                { staticClass: \"f-r-scroll scroll-style\" },\n                _vm._l(_vm.sysMessages, function(list) {\n                  return _c(\"div\", [_vm._v(_vm._s(list))])\n                }),\n                0\n              )\n            ])\n          ])\n        ])\n      ])\n    ],\n    1\n  )\n}\nvar staticRenderFns = [\n  function() {\n    var _vm = this\n    var _h = _vm.$createElement\n    var _c = _vm._self._c || _h\n    return _c(\"div\", { staticClass: \"fram-head\" }, [\n      _c(\"div\", [_vm._v(\"系统消息\")])\n    ])\n  }\n]\nrender._withStripped = true\n\nexport { render, staticRenderFns }","export * from \"-!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./chat.vue?vue&type=template&id=7311f14d&scoped=true&\""],"sourceRoot":""}