(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{610:function(e,s,t){"use strict";t.r(s);var n=t(794),i=t(644);for(var o in i)"default"!==o&&function(e){t.d(s,e,function(){return i[e]})}(o);t(747),t(748);var a=t(35),l=Object(a.a)(i.default,n.a,n.b,!1,null,"23b3be22",null);l.options.__file="src/pages/login/login.vue",s.default=l.exports},644:function(e,s,t){"use strict";t.r(s);var n=t(645),i=t.n(n);for(var o in n)"default"!==o&&function(e){t.d(s,e,function(){return n[e]})}(o);s.default=i.a},645:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var n=t(637),i=t(746),o=t(639);s.default={name:"login",data:function(){return{loginType:1,slideText:"拖动滑块验证",canvasSlideText:"拖动上方滑块验证",distance:"",isValiteSuccess:!1,isSlideBtnAnimat:!0,loginForm:{username:"",password:"",repassword:!0},loginFormRules:{username:[{validator:function(e,s,t){""===s?t(new Error("请输入账号")):t()},trigger:"blur"}],password:[{validator:function(e,s,t){""===s?t(new Error("请输入密码")):t()},trigger:"blur"}]}}},methods:{submitForm:function(e){var s=this;this.$refs[e].validate(function(e){if(!e)return s.layer.msg("登陆失败"),!1;(0,n.login)({username:s.loginForm.username,password:s.loginForm.password}).then(function(e){if(console.log(e),0===e.code){var t={username:s.loginForm.username,password:i.Base64.encode(s.loginForm.password),repassword:s.loginForm.repassword,token:e.token};s.$store.dispatch("loginAction",t),s.$store.dispatch("isLogin",!0),s.$router.push({path:s.$route.query.redirect?s.$route.query.redirect:"/"})}else s.layer.msg((0,o.codeText)(e.code,e.message)),3===s.loginType&&(s.$refs.slideBtn.style.left="0px",s.$refs.slideBg.style.width="0px",s.$refs.slideBtn.style.transition="left 1s ease",s.$refs.slideBg.style.transition="width 1s ease",s.slideText="拖动滑块验证",s.isValiteSuccess=!1,s.isSlideBtnAnimat=!0),2===s.loginType&&(s.$refs.block.style.left="0px",s.$refs.canvasSlideBtn.style.left="0px",s.$refs.canvasSlideBg.style.width="0px",s.$refs.block.style.transition="left 1s ease",s.$refs.canvasSlideBtn.style.transition="left 1s ease",s.$refs.canvasSlideBg.style.transition="width 1s ease",s.canvasSlideText="拖动上方滑块验证",s.isValiteSuccess=!1)}).catch(function(e){s.layer.msg((0,o.codeText)(e.code,e.message))})})},changeLoginType:function(e){this.loginType=e,2===e&&this.canvasInt()},canvasInt:function(){var e=document.getElementById("canvas"),s=document.getElementById("block"),n=e.getContext("2d"),i=s.getContext("2d");n.clearRect(0,0,250,100),s.width=250,s.height=100,i.clearRect(0,0,250,100);var o,a=new Image,l=40,r=10,c=40+Math.random()*(e.width-40-l-2*r),d=20+Math.random()*(e.height-l-20-2*r);this.distance=parseInt(c),a.onload=function(){n.drawImage(a,0,0,250,100),i.drawImage(a,0,0,250,100);var e=l+2*r,t=d-2*r+2,o=i.getImageData(c,t,e,e);s.width=e,i.putImageData(o,0,t)},a.src=t(646),(o=i).beginPath(),o.moveTo(c,d),o.lineTo(c+l/2,d),o.arc(c+l/2,d-r+2,r,0,2*Math.PI),o.lineTo(c+l/2,d),o.lineTo(c+l,d),o.lineTo(c+l,d+l/2),o.arc(c+l+r-2,d+l/2,r,0,2*Math.PI),o.lineTo(c+l,d+l/2),o.lineTo(c+l,d+l),o.lineTo(c,d+l),o.lineTo(c,d),o.clip(),o.beginPath(),o.arc(c,d+l/2,r,1.5*Math.PI,.5*Math.PI),o.globalCompositeOperation="xor",o.fillStyle="#fff",o.fill(),function(e){e.beginPath(),e.moveTo(c,d),e.lineTo(c+l/2,d),e.arc(c+l/2,d-r+2,r,0,2*Math.PI),e.lineTo(c+l/2,d),e.lineTo(c+l,d),e.lineTo(c+l,d+l/2),e.arc(c+l+r-2,d+l/2,r,0,2*Math.PI),e.lineTo(c+l,d+l/2),e.lineTo(c+l,d+l),e.lineTo(c,d+l),e.lineTo(c,d),e.fill(),e.beginPath(),e.arc(c,d+l/2,r,1.5*Math.PI,.5*Math.PI),e.globalCompositeOperation="xor",e.fillStyle="#fff",e.fill()}(n)},canvasSlideBtnMouseDown:function(e){var s=this;e.preventDefault();var t=e.clientX;this.canvasSlideText="",document.onmousemove=function(e){var n=e.clientX-t;n=n>210?210:n<0?0:n,s.$refs.block.style.left=n+"px",s.$refs.canvasSlideBtn.style.left=n+"px",s.$refs.canvasSlideBg.style.width=n+"px",s.$refs.block.style.transition="",s.$refs.canvasSlideBtn.style.transition="",s.$refs.canvasSlideBg.style.transition=""},document.onmouseup=function(e){var n=e.clientX-t;if(n<s.distance+3&&n>s.distance-3)return s.isValiteSuccess=!0,s.canvasSlideText="验证成功",document.onmousemove=null,document.onmouseup=null,s.$refs.canvasSlideBtn.onmousedown=null,void s.submitForm("loginForm");s.$refs.block.style.left="0px",s.$refs.canvasSlideBtn.style.left="0px",s.$refs.canvasSlideBg.style.width="0px",s.$refs.block.style.transition="left 1s ease",s.$refs.canvasSlideBtn.style.transition="left 1s ease",s.$refs.canvasSlideBg.style.transition="width 1s ease",s.canvasSlideText="拖动上方滑块验证",s.isValiteSuccess=!1,document.onmousemove=null,document.onmouseup=null,document.onmousemove=null,document.onmouseup=null}},slideBtnMouseDown:function(e){var s=this;e.preventDefault();var t=e.clientX;this.slideText="",this.isSlideBtnAnimat=!1,document.onmousemove=function(e){var n=e.clientX-t;n=n>210?210:n<0?0:n,s.$refs.slideBtn.style.transition="",s.$refs.slideBg.style.transition="",s.$refs.slideBtn.style.left=n+"px",s.$refs.slideBg.style.width=n+"px",s.isValiteSuccess=!1,210===n&&(s.isValiteSuccess=!0,s.slideText="验证成功",document.onmousemove=null,s.$refs.slideBtn.onmousedown=null,s.submitForm("loginForm"))},document.onmouseup=function(e){if(s.isValiteSuccess)return document.onmousemove=null,void(document.onmouseup=null);s.$refs.slideBtn.style.left="0px",s.$refs.slideBg.style.width="0px",s.$refs.slideBtn.style.transition="left 1s ease",s.$refs.slideBg.style.transition="width 1s ease",s.slideText="拖动滑块验证",s.isSlideBtnAnimat=!0,s.isValiteSuccess=!1,document.onmousemove=null,document.onmouseup=null,document.onmousemove=null,document.onmouseup=null}},loginWeiXin:function(){window.location.href="https://open.weixin.qq.com/connect/qrconnect?appid=wx995d7cf3ccc6209a&redirect_uri=&response_type=code&scope=snsapi_login&state=STATE#wechat_redirect"},loginQQ:function(){}},created:function(){var e=JSON.parse(localStorage.getItem("userInfo"));e&&e.repassword&&(this.loginForm.username=e.username,this.loginForm.password=i.Base64.decode(e.password),this.loginForm.repassword=e.repassword)}}},647:function(e,s,t){},648:function(e,s,t){},746:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});s.Base64=t(611).Base64},747:function(e,s,t){"use strict";var n=t(647);t.n(n).a},748:function(e,s,t){"use strict";var n=t(648);t.n(n).a},794:function(e,s,t){"use strict";var n=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"login",class:[e.isMobileBrowser()?"bg":""]},[t("div",{staticClass:"loginBack"},[t("div",{staticClass:"formWrap tc",class:[e.isMobileBrowser()?"mobile":"computed"]},[t("div",{staticClass:"form-foot tr"},[t("span",{directives:[{name:"show",rawName:"v-show",value:!(1===e.loginType),expression:"!(loginType === 1)"}],on:{click:function(s){e.changeLoginType(1)}}},[e._v("正常登录")]),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:!(2===e.loginType||e.isMobileBrowser()),expression:"!(loginType === 2) && !isMobileBrowser()"}],on:{click:function(s){e.changeLoginType(2)}}},[e._v("拼图登录")]),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:!(3===e.loginType||e.isMobileBrowser()),expression:"!(loginType === 3) && !isMobileBrowser()"}],on:{click:function(s){e.changeLoginType(3)}}},[e._v("滑块登录")])]),e._v(" "),t("div",{},[t("img",{staticClass:"f-avatar",attrs:{src:e.GLOBAL.avatar}}),e._v(" "),t("h3",{staticClass:"t-center"},[e._v("流莹离的个人博客登陆")])]),e._v(" "),t("el-form",{ref:"loginForm",staticClass:"demo-ruleForm",attrs:{model:e.loginForm,"label-position":"left","status-icon":"",rules:e.loginFormRules}},[t("el-form-item",{attrs:{prop:"username"}},[t("el-input",{attrs:{type:"text",autocomplete:"off",placeholder:"账号"},model:{value:e.loginForm.username,callback:function(s){e.$set(e.loginForm,"username",s)},expression:"loginForm.username"}})],1),e._v(" "),t("el-form-item",{attrs:{prop:"password"}},[t("el-input",{attrs:{type:"password",autocomplete:"off",placeholder:"密码"},model:{value:e.loginForm.password,callback:function(s){e.$set(e.loginForm,"password",s)},expression:"loginForm.password"}})],1),e._v(" "),3===e.loginType?t("el-form-item",[t("div",{staticClass:"slide-wrap t-center"},[t("div",{ref:"slideBg",staticClass:"slide-bg"}),e._v(" "),t("div",{ref:"slideBtn",staticClass:"slide-btn t-center",on:{mousedown:e.slideBtnMouseDown}},[t("span",{class:[{animation:e.isSlideBtnAnimat}]},[t("i",{staticClass:"el-icon-d-arrow-right"})])]),e._v(" "),t("span",{staticClass:"slide-text",class:[{success:e.isValiteSuccess}],domProps:{innerHTML:e._s(e.slideText)}})])]):e._e(),e._v(" "),2===e.loginType?t("el-form-item",[t("div",{staticClass:"canvas-wrap"},[t("canvas",{attrs:{id:"canvas",width:"250",height:"100"}}),e._v(" "),t("canvas",{ref:"block",attrs:{id:"block",width:"250",height:"100"}})]),e._v(" "),t("div",{staticClass:"canvas-slide-wrap t-center"},[t("div",{ref:"canvasSlideBg",staticClass:"canvas-slide-bg"}),e._v(" "),t("div",{ref:"canvasSlideBtn",staticClass:"canvas-slide-btn t-center",on:{mousedown:e.canvasSlideBtnMouseDown}},[t("span",[t("i",{staticClass:"el-icon-d-arrow-right"})])]),e._v(" "),t("span",{staticClass:"canvas-slide-text",class:[{success:e.isValiteSuccess}],domProps:{innerHTML:e._s(e.canvasSlideText)}})])]):e._e(),e._v(" "),t("el-row",[t("el-col",{staticClass:"tl",attrs:{span:12}},[t("el-checkbox",{attrs:{label:"记住密码",name:"type"},model:{value:e.loginForm.repassword,callback:function(s){e.$set(e.loginForm,"repassword",s)},expression:"loginForm.repassword"}})],1),e._v(" "),t("el-col",{staticClass:"tr",staticStyle:{"font-size":"14px"},attrs:{span:12}},[e._v("\n\t\t\t\t\t\t忘记密码?\n\t\t\t\t\t")])],1),e._v(" "),1===e.loginType?t("el-button",{attrs:{type:"primary"},on:{click:function(s){e.submitForm("loginForm")}}},[e._v("提交")]):e._e(),e._v(" "),t("div",{staticClass:"other-type"},[t("div",{staticClass:"other-text"},[e._v("其他方式登录")]),e._v(" "),t("span",{staticClass:"iconfont icon-qq",on:{click:e.loginQQ}}),e._v(" "),t("span",{staticClass:"iconfont icon-weixin",on:{click:e.loginWeiXin}})])],1)],1)])])},i=[];n._withStripped=!0,t.d(s,"a",function(){return n}),t.d(s,"b",function(){return i})}}]);
//# sourceMappingURL=7.ed3e76974b69bbf9dd62.js.map