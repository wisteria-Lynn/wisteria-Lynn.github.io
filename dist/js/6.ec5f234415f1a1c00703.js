(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{592:function(e,t,o){"use strict";o.r(t);var n=o(712),r=o(613);for(var s in r)"default"!==s&&function(e){o.d(t,e,function(){return r[e]})}(s);o(678),o(679);var i=o(53),a=Object(i.a)(r.default,n.a,n.b,!1,null,"23b3be22",null);a.options.__file="src/pages/login/login.vue",t.default=a.exports},613:function(e,t,o){"use strict";o.r(t);var n=o(614),r=o.n(n);for(var s in n)"default"!==s&&function(e){o.d(t,e,function(){return n[e]})}(s);t.default=r.a},614:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(607),r=o(676),s=o(608);t.default={name:"login",data:function(){return{loginType:1,slideText:"拖动滑块验证",canvasSlideText:"拖动上方滑块验证",distance:"",isValiteSuccess:!1,isSlideBtnAnimat:!0,loginForm:{username:"",password:"",repassword:!0},loginFormRules:{username:[{validator:function(e,t,o){""===t?o(new Error("请输入账号")):o()},trigger:"blur"}],password:[{validator:function(e,t,o){""===t?o(new Error("请输入密码")):o()},trigger:"blur"}]}}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.layer.msg("登陆失败"),!1;(0,n.login)({username:t.loginForm.username,password:t.loginForm.password}).then(function(e){if(console.log(e),0===e.code){var o={username:t.loginForm.username,password:r.Base64.encode(t.loginForm.password),repassword:t.loginForm.repassword,token:e.token};t.$store.dispatch("loginAction",o),t.$store.dispatch("isLogin",!0),t.$router.push({path:t.$route.query.redirect?t.$route.query.redirect:"/"})}else t.layer.msg((0,s.codeText)(e.code,e.message)),3===t.loginType&&(t.$refs.slideBtn.style.left="0px",t.$refs.slideBg.style.width="0px",t.$refs.slideBtn.style.transition="left 1s ease",t.$refs.slideBg.style.transition="width 1s ease",t.slideText="拖动滑块验证",t.isValiteSuccess=!1,t.isSlideBtnAnimat=!0),2===t.loginType&&(t.$refs.block.style.left="0px",t.$refs.canvasSlideBtn.style.left="0px",t.$refs.canvasSlideBg.style.width="0px",t.$refs.block.style.transition="left 1s ease",t.$refs.canvasSlideBtn.style.transition="left 1s ease",t.$refs.canvasSlideBg.style.transition="width 1s ease",t.canvasSlideText="拖动上方滑块验证",t.isValiteSuccess=!1)}).catch(function(e){t.layer.msg((0,s.codeText)(e.code,e.message))})})},changeLoginType:function(e){this.loginType=e,2===e&&this.canvasInt()},canvasInt:function(){var e=document.getElementById("canvas"),t=document.getElementById("block"),n=e.getContext("2d"),r=t.getContext("2d");n.clearRect(0,0,250,100),t.width=250,t.height=100,r.clearRect(0,0,250,100);var s,i=new Image,a=40,l=10,c=40+Math.random()*(e.width-40-a-2*l),u=20+Math.random()*(e.height-a-20-2*l);this.distance=parseInt(c),i.onload=function(){n.drawImage(i,0,0,250,100),r.drawImage(i,0,0,250,100);var e=a+2*l,o=u-2*l+2,s=r.getImageData(c,o,e,e);t.width=e,r.putImageData(s,0,o)},i.src=o(615),(s=r).beginPath(),s.moveTo(c,u),s.lineTo(c+a/2,u),s.arc(c+a/2,u-l+2,l,0,2*Math.PI),s.lineTo(c+a/2,u),s.lineTo(c+a,u),s.lineTo(c+a,u+a/2),s.arc(c+a+l-2,u+a/2,l,0,2*Math.PI),s.lineTo(c+a,u+a/2),s.lineTo(c+a,u+a),s.lineTo(c,u+a),s.lineTo(c,u),s.clip(),s.beginPath(),s.arc(c,u+a/2,l,1.5*Math.PI,.5*Math.PI),s.globalCompositeOperation="xor",s.fillStyle="#fff",s.fill(),function(e){e.beginPath(),e.moveTo(c,u),e.lineTo(c+a/2,u),e.arc(c+a/2,u-l+2,l,0,2*Math.PI),e.lineTo(c+a/2,u),e.lineTo(c+a,u),e.lineTo(c+a,u+a/2),e.arc(c+a+l-2,u+a/2,l,0,2*Math.PI),e.lineTo(c+a,u+a/2),e.lineTo(c+a,u+a),e.lineTo(c,u+a),e.lineTo(c,u),e.fill(),e.beginPath(),e.arc(c,u+a/2,l,1.5*Math.PI,.5*Math.PI),e.globalCompositeOperation="xor",e.fillStyle="#fff",e.fill()}(n)},canvasSlideBtnMouseDown:function(e){var t=this;e.preventDefault();var o=e.clientX;this.canvasSlideText="",document.onmousemove=function(e){var n=e.clientX-o;n=n>210?210:n<0?0:n,t.$refs.block.style.left=n+"px",t.$refs.canvasSlideBtn.style.left=n+"px",t.$refs.canvasSlideBg.style.width=n+"px",t.$refs.block.style.transition="",t.$refs.canvasSlideBtn.style.transition="",t.$refs.canvasSlideBg.style.transition=""},document.onmouseup=function(e){var n=e.clientX-o;if(n<t.distance+3&&n>t.distance-3)return t.isValiteSuccess=!0,t.canvasSlideText="验证成功",document.onmousemove=null,document.onmouseup=null,t.$refs.canvasSlideBtn.onmousedown=null,void t.submitForm("loginForm");t.$refs.block.style.left="0px",t.$refs.canvasSlideBtn.style.left="0px",t.$refs.canvasSlideBg.style.width="0px",t.$refs.block.style.transition="left 1s ease",t.$refs.canvasSlideBtn.style.transition="left 1s ease",t.$refs.canvasSlideBg.style.transition="width 1s ease",t.canvasSlideText="拖动上方滑块验证",t.isValiteSuccess=!1,document.onmousemove=null,document.onmouseup=null,document.onmousemove=null,document.onmouseup=null}},slideBtnMouseDown:function(e){var t=this;e.preventDefault();var o=e.clientX;this.slideText="",this.isSlideBtnAnimat=!1,document.onmousemove=function(e){var n=e.clientX-o;n=n>210?210:n<0?0:n,t.$refs.slideBtn.style.transition="",t.$refs.slideBg.style.transition="",t.$refs.slideBtn.style.left=n+"px",t.$refs.slideBg.style.width=n+"px",t.isValiteSuccess=!1,210===n&&(t.isValiteSuccess=!0,t.slideText="验证成功",document.onmousemove=null,t.$refs.slideBtn.onmousedown=null,t.submitForm("loginForm"))},document.onmouseup=function(e){if(t.isValiteSuccess)return document.onmousemove=null,void(document.onmouseup=null);t.$refs.slideBtn.style.left="0px",t.$refs.slideBg.style.width="0px",t.$refs.slideBtn.style.transition="left 1s ease",t.$refs.slideBg.style.transition="width 1s ease",t.slideText="拖动滑块验证",t.isSlideBtnAnimat=!0,t.isValiteSuccess=!1,document.onmousemove=null,document.onmouseup=null,document.onmousemove=null,document.onmouseup=null}},loginWeiXin:function(){window.location.href="https://open.weixin.qq.com/connect/qrconnect?appid=wx995d7cf3ccc6209a&redirect_uri=&response_type=code&scope=snsapi_login&state=STATE#wechat_redirect"},loginQQ:function(){}},created:function(){var e=JSON.parse(localStorage.getItem("userInfo"));e&&e.repassword&&(this.loginForm.username=e.username,this.loginForm.password=r.Base64.decode(e.password),this.loginForm.repassword=e.repassword)}}},616:function(e,t,o){},617:function(e,t,o){},676:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Base64=o(677).Base64},677:function(module,exports,__webpack_require__){(function(global){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(e,t){module.exports=t(e)}("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==global?global:this,function(global){"use strict";global=global||{};var _Base64=global.Base64,version="2.5.1",buffer;if(module.exports)try{buffer=eval("require('buffer').Buffer")}catch(e){buffer=void 0}var b64chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b64tab=function(e){for(var t={},o=0,n=e.length;o<n;o++)t[e.charAt(o)]=o;return t}(b64chars),fromCharCode=String.fromCharCode,cb_utob=function(e){if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?fromCharCode(192|t>>>6)+fromCharCode(128|63&t):fromCharCode(224|t>>>12&15)+fromCharCode(128|t>>>6&63)+fromCharCode(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return fromCharCode(240|t>>>18&7)+fromCharCode(128|t>>>12&63)+fromCharCode(128|t>>>6&63)+fromCharCode(128|63&t)},re_utob=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,utob=function(e){return e.replace(re_utob,cb_utob)},cb_encode=function(e){var t=[0,2,1][e.length%3],o=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[b64chars.charAt(o>>>18),b64chars.charAt(o>>>12&63),t>=2?"=":b64chars.charAt(o>>>6&63),t>=1?"=":b64chars.charAt(63&o)].join("")},btoa=global.btoa?function(e){return global.btoa(e)}:function(e){return e.replace(/[\s\S]{1,3}/g,cb_encode)},_encode=buffer?buffer.from&&Uint8Array&&buffer.from!==Uint8Array.from?function(e){return(e.constructor===buffer.constructor?e:buffer.from(e)).toString("base64")}:function(e){return(e.constructor===buffer.constructor?e:new buffer(e)).toString("base64")}:function(e){return btoa(utob(e))},encode=function(e,t){return t?_encode(String(e)).replace(/[+\/]/g,function(e){return"+"==e?"-":"_"}).replace(/=/g,""):_encode(String(e))},encodeURI=function(e){return encode(e,!0)},re_btou=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),cb_btou=function(e){switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return fromCharCode(55296+(t>>>10))+fromCharCode(56320+(1023&t));case 3:return fromCharCode((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return fromCharCode((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},btou=function(e){return e.replace(re_btou,cb_btou)},cb_decode=function(e){var t=e.length,o=t%4,n=(t>0?b64tab[e.charAt(0)]<<18:0)|(t>1?b64tab[e.charAt(1)]<<12:0)|(t>2?b64tab[e.charAt(2)]<<6:0)|(t>3?b64tab[e.charAt(3)]:0),r=[fromCharCode(n>>>16),fromCharCode(n>>>8&255),fromCharCode(255&n)];return r.length-=[0,0,2,1][o],r.join("")},_atob=global.atob?function(e){return global.atob(e)}:function(e){return e.replace(/\S{1,4}/g,cb_decode)},atob=function(e){return _atob(String(e).replace(/[^A-Za-z0-9\+\/]/g,""))},_decode=buffer?buffer.from&&Uint8Array&&buffer.from!==Uint8Array.from?function(e){return(e.constructor===buffer.constructor?e:buffer.from(e,"base64")).toString()}:function(e){return(e.constructor===buffer.constructor?e:new buffer(e,"base64")).toString()}:function(e){return btou(_atob(e))},decode=function(e){return _decode(String(e).replace(/[-_]/g,function(e){return"-"==e?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},noConflict=function(){var e=global.Base64;return global.Base64=_Base64,e};if(global.Base64={VERSION:version,atob:atob,btoa:btoa,fromBase64:decode,toBase64:encode,utob:utob,encode:encode,encodeURI:encodeURI,btou:btou,decode:decode,noConflict:noConflict,__buffer__:buffer},"function"==typeof Object.defineProperty){var noEnum=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}};global.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",noEnum(function(){return decode(this)})),Object.defineProperty(String.prototype,"toBase64",noEnum(function(e){return encode(this,e)})),Object.defineProperty(String.prototype,"toBase64URI",noEnum(function(){return encode(this,!0)}))}}return global.Meteor&&(Base64=global.Base64),module.exports?module.exports.Base64=global.Base64:(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){return global.Base64}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)),{Base64:global.Base64}})}).call(this,__webpack_require__(54))},678:function(e,t,o){"use strict";var n=o(616);o.n(n).a},679:function(e,t,o){"use strict";var n=o(617);o.n(n).a},712:function(e,t,o){"use strict";var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"login"},[o("div",{staticClass:"loginBack"},[o("div",{staticClass:"formWrap"},[o("h3",{staticClass:"t-center"},[e._v("流莹离的个人博客登陆")]),e._v(" "),o("el-form",{ref:"loginForm",staticClass:"demo-ruleForm",attrs:{model:e.loginForm,"label-position":"left","status-icon":"",rules:e.loginFormRules,"label-width":"100px"}},[o("el-form-item",[o("div",{staticClass:"form-foot t-right"},[o("span",{directives:[{name:"show",rawName:"v-show",value:!(1===e.loginType),expression:"!(loginType === 1)"}],on:{click:function(t){e.changeLoginType(1)}}},[e._v("正常登录")]),e._v(" "),o("span",{directives:[{name:"show",rawName:"v-show",value:!(2===e.loginType||e.isMobileBrowser()),expression:"!(loginType === 2) && !isMobileBrowser()"}],on:{click:function(t){e.changeLoginType(2)}}},[e._v("拼图登录")]),e._v(" "),o("span",{directives:[{name:"show",rawName:"v-show",value:!(3===e.loginType||e.isMobileBrowser()),expression:"!(loginType === 3) && !isMobileBrowser()"}],on:{click:function(t){e.changeLoginType(3)}}},[e._v("滑块登录")])])]),e._v(" "),o("el-form-item",{attrs:{label:"账号",prop:"username"}},[o("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"密码",prop:"password"}},[o("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),e._v(" "),3===e.loginType?o("el-form-item",[o("div",{staticClass:"slide-wrap t-center"},[o("div",{ref:"slideBg",staticClass:"slide-bg"}),e._v(" "),o("div",{ref:"slideBtn",staticClass:"slide-btn t-center",on:{mousedown:e.slideBtnMouseDown}},[o("span",{class:[{animation:e.isSlideBtnAnimat}]},[o("i",{staticClass:"el-icon-d-arrow-right"})])]),e._v(" "),o("span",{staticClass:"slide-text",class:[{success:e.isValiteSuccess}],domProps:{innerHTML:e._s(e.slideText)}})])]):e._e(),e._v(" "),2===e.loginType?o("el-form-item",[o("div",{staticClass:"canvas-wrap"},[o("canvas",{attrs:{id:"canvas",width:"250",height:"100"}}),e._v(" "),o("canvas",{ref:"block",attrs:{id:"block",width:"250",height:"100"}})]),e._v(" "),o("div",{staticClass:"canvas-slide-wrap t-center"},[o("div",{ref:"canvasSlideBg",staticClass:"canvas-slide-bg"}),e._v(" "),o("div",{ref:"canvasSlideBtn",staticClass:"canvas-slide-btn t-center",on:{mousedown:e.canvasSlideBtnMouseDown}},[o("span",[o("i",{staticClass:"el-icon-d-arrow-right"})])]),e._v(" "),o("span",{staticClass:"canvas-slide-text",class:[{success:e.isValiteSuccess}],domProps:{innerHTML:e._s(e.canvasSlideText)}})])]):e._e(),e._v(" "),o("el-form-item",{attrs:{label:" ",prop:"repassword"}},[o("el-checkbox",{attrs:{label:"记住密码",name:"type"},model:{value:e.loginForm.repassword,callback:function(t){e.$set(e.loginForm,"repassword",t)},expression:"loginForm.repassword"}})],1),e._v(" "),1===e.loginType?o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("loginForm")}}},[e._v("提交")])],1):e._e(),e._v(" "),o("el-form-item",[o("div",{staticClass:"other-type"},[o("div",{staticClass:"other-text"},[e._v("其他方式登录")]),e._v(" "),o("span",{staticClass:"iconfont icon-qq",on:{click:e.loginQQ}}),e._v(" "),o("span",{staticClass:"iconfont icon-weixin",on:{click:e.loginWeiXin}})])])],1)],1)])])},r=[];n._withStripped=!0,o.d(t,"a",function(){return n}),o.d(t,"b",function(){return r})}}]);
//# sourceMappingURL=6.ec5f234415f1a1c00703.js.map